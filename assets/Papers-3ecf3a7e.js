import{_ as al,B as ol,o as nl,c as be,a as C,b as F,d as s,e,w as o,l as P,t as S,u as a,y as N,i as D,r as y,n as rl,E as sl,f as il,h as ul,F as O,m as le,C as dl,D as Ce,G as xe,H as cl,I as we,J as ie,x as Pe,K as R,L as Se,M as pl,N as ml,O as Ve,P as fl,Q as vl,R as yl,S as _l,T as gl,q as hl,s as bl,U as Cl,V as xl,W as wl,X as Pl,Y as Sl,j as ke,Z as Vl}from"./index-dab368ea.js";/* empty css                   */import{s as $}from"./request-afa285ff.js";/* empty css                  *//* empty css                   *//* empty css                 *//* empty css                        *//* empty css                      *//* empty css                  *//* empty css                     */import{s as p,c as ue}from"./message-f989d8e8.js";async function kl(_){return $({url:"/papers",method:"GET",params:_})}async function zl(_){return $({url:`/papers/${_}`,method:"GET"})}async function El(_){return $({url:"/papers",method:"POST",data:_})}async function ql(_){return $({url:`/papers/${_.id}`,method:"PUT",data:_})}async function Fl(_){return $({url:`/papers/${_}`,method:"DELETE"})}async function $l(_){return $({url:`/papers/${_}/questions`,method:"GET"})}async function Ul(_,te){return $({url:`/papers/${_}/questions`,method:"POST",data:te})}async function Ql(_){return $({url:`/papers/questions/${_.id}`,method:"PUT",data:_})}async function Dl(_){return $({url:`/papers/questions/${_}`,method:"DELETE"})}const k={getPapers:kl,getPaperById:zl,createPaper:El,updatePaper:ql,deletePaper:Fl,getPaperQuestions:$l,createPaperQuestion:Ul,updatePaperQuestion:Ql,deletePaperQuestion:Dl};const Tl={class:"papers-container"},Al={class:"main-category-title",style:{color:"#303133"}},Gl={class:"main-category-container"},Il={class:"subcategory-grid"},jl={class:"subcategory-content"},Bl={class:"subcategory-info"},Nl={class:"card-header"},Ol={style:{color:"#409eff"}},Rl={class:"paper-actions"},Jl={class:"action-buttons"},Ll={class:"dialog-footer"},Ml={class:"level-selector-buttons"},Wl={style:{display:"flex","flex-direction":"column","align-items":"center",gap:"6px"}},Hl={style:{display:"flex","align-items":"center"}},Yl={class:"paper-count",style:{"font-size":"18px",color:"#909399","font-weight":"600","margin-top":"4px"}},Kl={style:{display:"flex","flex-direction":"column","align-items":"center",gap:"6px"}},Xl={style:{display:"flex","align-items":"center"}},Zl={class:"paper-count",style:{"font-size":"18px",color:"#ffffff","font-weight":"600","margin-top":"4px"}},et={class:"card-header"},lt={class:"search-bar"},tt={class:"button-group"},at={class:"correct-answer"},ot={class:"action-buttons"},nt={class:"options-container"},rt={class:"option-letter",style:{"min-width":"30px","flex-shrink":"0"}},st={class:"option-note",style:{"margin-top":"8px"}},it={class:"dialog-footer"},ut={__name:"Papers",setup(_){const te=ol();nl(()=>{Z()});const T=y(!1),ae=y("新建试卷"),H=y(1),Y=y(10),f=y(null),K=y(!1),A=y(!1),oe=y("新建题目"),I=y(1),X=y(10),q=y(null),J=y({title:""}),L=y(null),M=y(null),d=y({id:"",title:"",type:"choice",options:["","","",""],correct_answer:"",explanation:""}),U=y([]),j=y([]),x=y({year:"",month:""}),c=y({id:"",name:"",subject:"",year:"",month:"",totalScore:100,questionCount:0,description:""}),ze=y([{id:"gesp",name:"GESP等级认证",icon:"GESP",color:"#4CAF50",subcategories:[{name:"GESP等级认证（Scratch）",icon:"Scratch",color:"#4CAF50"},{name:"GESP等级认证（Python）",icon:"Python",color:"#4CAF50"},{name:"GESP等级认证（C++）",icon:"Cpp",color:"#4CAF50"}]},{id:"youth",name:"中国电子协会考级",icon:"中国电子协会考级",color:"#FF5722",subcategories:[{name:"中国电子协会考级（Scratch）",icon:"Scratch",color:"#FF5722"},{name:"中国电子协会考级（Python）",icon:"Python",color:"#FF5722"},{name:"中国电子协会考级（C++）",icon:"C",color:"#FF5722"}]},{id:"lanqiao",name:"蓝桥杯大赛",icon:"蓝桥杯",color:"#2196F3",subcategories:[{name:"蓝桥杯大赛（Scratch）",icon:"Scratch",color:"#2196F3"},{name:"蓝桥杯大赛（Python）",icon:"Python",color:"#2196F3"},{name:"蓝桥杯大赛（C++）",icon:"C",color:"#2196F3"}]},{id:"info-literacy",name:"信息素养大赛",icon:"信息素养",color:"#9C27B0",subcategories:[{name:"信息素养大赛（Scratch）",icon:"Scratch",color:"#9C27B0"},{name:"信息素养大赛（Python）",icon:"Python",color:"#9C27B0"},{name:"信息素养大赛（C++）",icon:"C",color:"#9C27B0"}]},{id:"ioi",name:"信息学奥赛",icon:"信息学奥赛",color:"#FFC107",subcategories:[{name:"信息学奥赛",icon:"Competition",color:"#FFC107"}]}]),w=y([]),de=be(()=>{let t=w.value;return f.value&&(t=t.filter(l=>l.category_name===f.value.name)),x.value.year&&(t=t.filter(l=>l.year==x.value.year)),x.value.month&&(t=t.filter(l=>l.month==x.value.month)),t}),ce=be(()=>{let t=U.value;return J.value.title&&(t=t.filter(l=>l.title.includes(J.value.title))),t}),W=y(!1),V=y(null),ne=y(["一","二","三","四","五","六","七","八","九","十"]),pe={一:1,二:2,三:3,四:4,五:5,六:6,七:7,八:8,九:9,十:10},Ee=async t=>{V.value=t,t.name.includes("Scratch")?ne.value=["一","二","三","四"]:ne.value=["一","二","三","四","五","六","七","八"];try{const l=await k.getPapers({category_name:t.name});w.value=l||[]}catch(l){console.error("获取试卷列表失败:",l),p("获取试卷列表失败","error"),w.value=[]}W.value=!0},qe=t=>V.value?w.value.filter(l=>{const u=l.category_name===V.value.name,i=l.level===pe[t];return u&&i}).length:0,Fe=()=>V.value?w.value.filter(t=>t.category_name===V.value.name).length:0,me=async t=>{const l={...V.value,level:t==="全部"?"":pe[t],levelText:t==="全部"?"全部":t};f.value=l,W.value=!1,await Z()},$e=()=>{f.value=null,w.value=[]},Ue=async()=>{await Z()},Qe=()=>{x.value={year:"",month:""},Z()},Z=async()=>{try{const t={};f.value&&f.value.level&&f.value.level!==""&&(t.level=f.value.level),x.value.year&&(t.year=x.value.year),x.value.month&&(t.month=x.value.month);const l=await k.getPapers(t);w.value=l||[]}catch(t){console.error("获取试卷列表失败:",t),p("获取试卷列表失败","error")}},De=t=>{Y.value=t},Te=t=>{H.value=t},Ae=()=>{ae.value="新建试卷",c.value={id:"",name:"",subject:f.value?f.value.name:"",totalScore:100,questionCount:0,description:""},T.value=!0},Ge=t=>{ae.value="编辑试卷",c.value={id:t.id,name:t.name,subject:t.category_name||t.subject,year:t.year||"",month:t.month||"",totalScore:t.total_score||100,questionCount:t.question_count||0,description:t.description||""},T.value=!0},Ie=()=>{M.value&&M.value.click()},je=async t=>{const l=t.target.files[0];if(l)try{const u=await l.text(),i=JSON.parse(u);if(!i.paper||!Array.isArray(i.questions)){p("JSON格式错误，必须包含paper和questions字段","error");return}const E={category_id:f.value.id||"",category_name:f.value.name||"",language_id:"",language_name:"",level:f.value.level||"",level_text:f.value.levelText||"",year:i.paper.year||new Date().getFullYear().toString(),month:i.paper.month||(new Date().getMonth()+1).toString(),name:i.paper.name||"导入试卷",total_score:i.paper.total_score||100,question_count:i.questions.length,description:i.paper.description||"",status:1},r=await k.createPaper(E);w.value.unshift(r);let h=0,v=0;for(let g=0;g<i.questions.length;g++){const m=i.questions[g];try{const Q={paper_id:r.id,paper_name:r.name,type:m.type||"choice",title:m.title,options:m.type==="choice"?m.options||["","","",""]:null,correct_answer:m.correct_answer||m.correctAnswer,explanation:m.explanation||"",sort_order:g+1,difficulty:m.difficulty||1},re=await k.createPaperQuestion(r.id,Q);h++}catch(Q){console.error("导入题目失败:",Q),v++}}h>0?p(`成功导入试卷，包含 ${h} 道题目${v>0?`，失败 ${v} 道`:""}`):p("导入失败","error")}catch(u){console.error("解析JSON文件失败:",u),p("JSON文件格式错误","error")}finally{M.value&&(M.value.value="")}},Be=async t=>{ue("确定要删除该试卷吗？").then(async()=>{try{await k.deletePaper(t),w.value=w.value.filter(l=>l.id!==t),p("删除成功")}catch(l){console.error("删除试卷失败:",l),p("删除失败","error")}}).catch(()=>{})},Ne=async t=>{q.value=t,await fe(t.id),K.value=!0},fe=async t=>{try{const l=await k.getPaperQuestions(t);U.value=l||[]}catch(l){console.error("获取题目列表失败:",l),p("获取题目列表失败","error")}},Oe=()=>{oe.value="新建题目",d.value={id:"",title:"",type:"choice",options:["","","",""],correct_answer:"",explanation:""},A.value=!0},Re=t=>{oe.value="编辑题目",d.value={id:t.id,title:t.title,type:t.type||"choice",options:t.type==="choice"?t.options||["","","",""]:["","","",""],correct_answer:t.correct_answer||"",explanation:t.explanation||""},A.value=!0},Je=async t=>{ue("确定要删除该题目吗？").then(async()=>{try{await k.deletePaperQuestion(t),U.value=U.value.filter(l=>l.id!==t),p("删除成功")}catch(l){console.error("删除题目失败:",l),p("删除失败","error")}}).catch(()=>{})},Le=t=>{j.value=t},Me=()=>{if(j.value.length===0){p("请先选择要删除的题目");return}ue(`确定要删除选中的 ${j.value.length} 道题目吗？`).then(async()=>{try{const t=j.value.map(l=>k.deletePaperQuestion(l.id));await Promise.all(t),p("批量删除成功"),j.value=[],await fe(q.value.id)}catch(t){console.error("批量删除题目失败:",t),p("批量删除失败","error")}}).catch(()=>{})},We=()=>{L.value&&L.value.click()},He=async t=>{const l=t.target.files[0];if(l)try{const u=await l.text(),i=JSON.parse(u);let E=[];if(Array.isArray(i))E=i;else if(i.questions&&Array.isArray(i.questions))E=i.questions;else{p("JSON格式错误，必须是题目数组或包含questions字段的试卷格式","error");return}let r=0,h=0;for(let v=0;v<E.length;v++){const g=E[v];try{const m={paper_id:q.value.id,paper_name:q.value.name,type:g.type||"choice",title:g.title,options:g.type==="choice"?g.options||["","","",""]:null,correct_answer:g.correct_answer||g.correctAnswer,explanation:g.explanation||"",sort_order:0,difficulty:1},Q=await k.createPaperQuestion(q.value.id,m);E.value.unshift(Q),r++}catch(m){console.error("导入题目失败:",m),h++}}r>0?p(`成功导入 ${r} 道题目${h>0?`，失败 ${h} 道`:""}`):p("导入失败","error")}catch(u){console.error("解析JSON文件失败:",u),p("JSON文件格式错误","error")}finally{L.value&&(L.value.value="")}},Ye=async()=>{if(!d.value.title){p("请输入题目内容","error");return}if(!d.value.correct_answer){p("请选择正确答案","error");return}if(d.value.type==="choice"&&d.value.options.some(l=>!l.trim())){p("请填写所有选项内容","error");return}try{const t={paper_id:q.value.id,paper_name:q.value.name,type:d.value.type,title:d.value.title,options:d.value.type==="choice"?d.value.options:null,correct_answer:d.value.correct_answer,explanation:d.value.explanation,sort_order:0,difficulty:1};if(d.value.id){t.id=d.value.id,await k.updatePaperQuestion(t);const l=U.value.findIndex(u=>u.id===d.value.id);l!==-1&&(U.value[l]={...U.value[l],...d.value}),p("编辑成功")}else{const l=await k.createPaperQuestion(q.value.id,t);U.value.unshift(l),p("创建成功")}A.value=!1}catch(t){console.error("保存题目失败:",t),p("保存失败","error")}},Ke=()=>{I.value=1},Xe=t=>{X.value=t,I.value=1},Ze=t=>{I.value=t},el=async()=>{if(!c.value.name){p("请输入试卷名称","error");return}if(!c.value.subject){p("请选择科目","error");return}try{const t={category_id:"",category_name:f.value?f.value.name:"",language_id:"",language_name:f.value?f.value.name:"",level:f.value?f.value.level:1,level_text:f.value?f.value.levelText:"一",year:c.value.year||new Date().getFullYear().toString(),month:c.value.month||(new Date().getMonth()+1).toString(),name:c.value.name,total_score:c.value.totalScore,question_count:c.value.questionCount,description:c.value.description,status:1};if(c.value.id){t.id=c.value.id,await k.updatePaper(t);const l=w.value.findIndex(u=>u.id===c.value.id);l!==-1&&(w.value[l]={...w.value[l],...c.value}),p("编辑成功")}else{const l=await k.createPaper(t);w.value.unshift(l),p("创建成功")}T.value=!1}catch(t){console.error("保存试卷失败:",t),p("保存失败","error")}};return(t,l)=>{var ye,_e;const u=rl,i=fl,E=sl,r=vl,h=yl,v=_l,g=gl,m=hl,Q=bl,re=Cl,B=xl,ve=wl,ee=il,ll=Pl,tl=Sl;return C(),F("div",Tl,[s("h2",Al,[e(u,{class:"title-icon"},{default:o(()=>[e(a(ul))]),_:1}),P(" "+S(a(te).meta.title),1)]),a(f)?(C(),N(E,{key:1,shadow:"hover"},{header:o(()=>[s("div",Nl,[s("span",{style:{"margin-left":"20px","font-size":"24px","font-weight":"bold",cursor:"pointer",display:"flex","align-items":"center"},onClick:$e},[e(u,{style:{"margin-right":"10px","font-size":"24px"}},{default:o(()=>[e(a(dl))]),_:1}),P(" "+S(a(f).name)+" ",1),s("span",Ol,"("+S(a(f).levelText)+"级) ",1),l[25]||(l[25]=P("- 试卷管理",-1))])]),s("div",Rl,[e(i,{type:"primary",size:"medium",onClick:Ae},{default:o(()=>[e(u,null,{default:o(()=>[e(a(Ce))]),_:1}),l[26]||(l[26]=s("span",null,"添加试卷",-1))]),_:1}),e(i,{type:"success",size:"medium",onClick:Ie},{default:o(()=>[e(u,null,{default:o(()=>[e(a(xe))]),_:1}),l[27]||(l[27]=s("span",null,"导入试卷",-1))]),_:1}),s("input",{ref_key:"paperFileInputRef",ref:M,type:"file",accept:".json",style:{display:"none"},onChange:je},null,544)])]),default:o(()=>[e(g,{inline:!0,model:a(x),style:{"margin-bottom":"20px"}},{default:o(()=>[e(v,{label:"年份"},{default:o(()=>[e(h,{modelValue:a(x).year,"onUpdate:modelValue":l[0]||(l[0]=n=>a(x).year=n),placeholder:"请选择年份",style:{width:"200px"}},{default:o(()=>[e(r,{label:"2019",value:"2019"}),e(r,{label:"2021",value:"2021"}),e(r,{label:"2022",value:"2022"}),e(r,{label:"2023",value:"2023"}),e(r,{label:"2024",value:"2024"}),e(r,{label:"2025",value:"2025"}),e(r,{label:"2026",value:"2026"})]),_:1},8,["modelValue"])]),_:1}),e(v,{label:"月份"},{default:o(()=>[e(h,{modelValue:a(x).month,"onUpdate:modelValue":l[1]||(l[1]=n=>a(x).month=n),placeholder:"请选择月份",style:{width:"200px"}},{default:o(()=>[e(r,{label:"3月",value:"3"}),e(r,{label:"6月",value:"6"}),e(r,{label:"9月",value:"9"}),e(r,{label:"12月",value:"12"})]),_:1},8,["modelValue"])]),_:1}),e(v,null,{default:o(()=>[e(i,{type:"primary",size:"medium",onClick:Ue},{default:o(()=>[...l[28]||(l[28]=[P("筛选",-1)])]),_:1}),e(i,{size:"medium",onClick:Qe},{default:o(()=>[...l[29]||(l[29]=[P("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"]),e(Q,{data:a(de),style:{width:"100%"}},{default:o(()=>[e(m,{type:"index",label:"序号",width:"100"}),e(m,{prop:"name",label:"试卷名称"}),e(m,{prop:"year",label:"年份"}),e(m,{label:"月份"},{default:o(n=>[P(S(n.row.month)+"月 ",1)]),_:1}),e(m,{prop:"total_score",label:"总分"}),e(m,{prop:"question_count",label:"题目数量"}),e(m,{label:"操作",width:"350",fixed:"right"},{default:o(n=>[s("div",Jl,[e(i,{size:"medium",type:"primary",onClick:b=>Ne(n.row)},{default:o(()=>[e(u,null,{default:o(()=>[e(a(cl))]),_:1}),l[30]||(l[30]=s("span",null,"管理题目",-1))]),_:1},8,["onClick"]),e(i,{size:"medium",onClick:b=>Ge(n.row)},{default:o(()=>[e(u,null,{default:o(()=>[e(a(we))]),_:1}),l[31]||(l[31]=s("span",null,"编辑",-1))]),_:1},8,["onClick"]),e(i,{size:"medium",type:"danger",onClick:b=>Be(n.row.id)},{default:o(()=>[e(u,null,{default:o(()=>[e(a(ie))]),_:1}),l[32]||(l[32]=s("span",null,"删除",-1))]),_:1},8,["onClick"])])]),_:1})]),_:1},8,["data"]),e(re,{"current-page":a(H),"onUpdate:currentPage":l[2]||(l[2]=n=>D(H)?H.value=n:null),"page-size":a(Y),"onUpdate:pageSize":l[3]||(l[3]=n=>D(Y)?Y.value=n:null),"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:a(de).length,onSizeChange:De,onCurrentChange:Te,style:{"margin-top":"20px","text-align":"right"}},null,8,["current-page","page-size","total"])]),_:1})):(C(),N(E,{key:0,shadow:"hover"},{default:o(()=>[s("div",Gl,[(C(!0),F(O,null,le(a(ze),(n,b)=>(C(),F("div",{key:b,class:"main-category"},[s("h2",{class:"main-category-title",style:R({color:n.color})},[e(u,{style:{"margin-right":"8px","vertical-align":"middle"}},{default:o(()=>[e(a(ke))]),_:1}),P(" "+S(n.name),1)],4),s("div",Il,[(C(!0),F(O,null,le(n.subcategories,(z,G)=>(C(),N(E,{key:G,shadow:"hover",class:"subcategory-card",style:R({borderLeft:`4px solid ${z.color}`}),onClick:se=>Ee(z)},{default:o(()=>[s("div",jl,[s("div",{class:"subcategory-icon",style:R({backgroundColor:`${z.color}20`})},[e(u,null,{default:o(()=>[e(a(ke))]),_:1})],4),s("div",Bl,[s("h3",null,S(z.name),1),s("p",null,S(z.icon)+" 相关试卷",1)]),e(i,{type:"primary",size:"small",style:R({backgroundColor:z.color,borderColor:z.color})},{default:o(()=>[e(u,null,{default:o(()=>[e(a(Vl))]),_:1})]),_:1},8,["style"])])]),_:2},1032,["style","onClick"]))),128))])]))),128))])]),_:1})),e(ee,{modelValue:a(T),"onUpdate:modelValue":l[12]||(l[12]=n=>D(T)?T.value=n:null),title:a(ae),width:"600px"},{footer:o(()=>[s("span",Ll,[e(i,{size:"medium",onClick:l[11]||(l[11]=n=>T.value=!1)},{default:o(()=>[...l[33]||(l[33]=[P("取消",-1)])]),_:1}),e(i,{type:"primary",size:"medium",onClick:el},{default:o(()=>[...l[34]||(l[34]=[P("确定",-1)])]),_:1})])]),default:o(()=>[e(g,{model:a(c),"label-width":"100px"},{default:o(()=>[e(v,{label:"试卷名称"},{default:o(()=>[e(B,{modelValue:a(c).name,"onUpdate:modelValue":l[4]||(l[4]=n=>a(c).name=n),placeholder:"请输入试卷名称"},null,8,["modelValue"])]),_:1}),e(v,{label:"科目"},{default:o(()=>[e(h,{modelValue:a(c).subject,"onUpdate:modelValue":l[5]||(l[5]=n=>a(c).subject=n),placeholder:"请选择科目"},{default:o(()=>[e(r,{label:"青少年软件编程（Scratch）",value:"青少年软件编程（Scratch）"}),e(r,{label:"青少年软件编程（Python）",value:"青少年软件编程（Python）"}),e(r,{label:"青少年软件编程（机器人）",value:"青少年软件编程（机器人）"}),e(r,{label:"青少年软件编程（C语言）",value:"青少年软件编程（C语言）"}),e(r,{label:"蓝桥杯大赛（Scratch）",value:"蓝桥杯大赛（Scratch）"}),e(r,{label:"蓝桥杯大赛（Python）",value:"蓝桥杯大赛（Python）"}),e(r,{label:"蓝桥杯大赛（C语言）",value:"蓝桥杯大赛（C语言）"}),e(r,{label:"GESP等级认证（Scratch）",value:"GESP等级认证（Scratch）"}),e(r,{label:"GESP等级认证（Python）",value:"GESP等级认证（Python）"}),e(r,{label:"GESP等级认证（C++）",value:"GESP等级认证（C++）"}),e(r,{label:"信息学奥赛",value:"信息学奥赛"}),e(r,{label:"信息素养大赛（Scratch）",value:"信息素养大赛（Scratch）"}),e(r,{label:"信息素养大赛（Python）",value:"信息素养大赛（Python）"}),e(r,{label:"信息素养大赛（C语言）",value:"信息素养大赛（C语言）"})]),_:1},8,["modelValue"])]),_:1}),e(v,{label:"年份"},{default:o(()=>[e(h,{modelValue:a(c).year,"onUpdate:modelValue":l[6]||(l[6]=n=>a(c).year=n),placeholder:"请选择年份"},{default:o(()=>[e(r,{label:"2019",value:"2019"}),e(r,{label:"2021",value:"2021"}),e(r,{label:"2022",value:"2022"}),e(r,{label:"2023",value:"2023"}),e(r,{label:"2024",value:"2024"}),e(r,{label:"2025",value:"2025"}),e(r,{label:"2026",value:"2026"})]),_:1},8,["modelValue"])]),_:1}),e(v,{label:"月份"},{default:o(()=>[e(h,{modelValue:a(c).month,"onUpdate:modelValue":l[7]||(l[7]=n=>a(c).month=n),placeholder:"请选择月份"},{default:o(()=>[e(r,{label:"3月",value:"3"}),e(r,{label:"6月",value:"6"}),e(r,{label:"9月",value:"9"}),e(r,{label:"12月",value:"12"})]),_:1},8,["modelValue"])]),_:1}),e(v,{label:"总分"},{default:o(()=>[e(ve,{modelValue:a(c).totalScore,"onUpdate:modelValue":l[8]||(l[8]=n=>a(c).totalScore=n),min:0,max:1e3,style:{width:"100%"}},null,8,["modelValue"])]),_:1}),e(v,{label:"题目数量"},{default:o(()=>[e(ve,{modelValue:a(c).questionCount,"onUpdate:modelValue":l[9]||(l[9]=n=>a(c).questionCount=n),min:0,max:1e3,style:{width:"100%"}},null,8,["modelValue"])]),_:1}),e(v,{label:"试卷描述"},{default:o(()=>[e(B,{modelValue:a(c).description,"onUpdate:modelValue":l[10]||(l[10]=n=>a(c).description=n),type:"textarea",rows:3,placeholder:"请输入试卷描述"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),e(ee,{modelValue:a(W),"onUpdate:modelValue":l[14]||(l[14]=n=>D(W)?W.value=n:null),title:`选择${(ye=a(V))==null?void 0:ye.name}的级别`,width:"500",center:"","custom-class":"level-selector-dialog","close-on-click-modal":!0,class:"level-dialog-wrapper"},{default:o(()=>{var n,b,z;return[s("div",Ml,[(C(!0),F(O,null,le(a(ne),G=>{var se,ge,he;return C(),N(i,{key:G,type:"default",size:"medium",class:Pe("level-button"),style:R({"--button-color":(se=a(V))==null?void 0:se.color,border:`2px solid ${(ge=a(V))==null?void 0:ge.color}`,color:(he=a(V))==null?void 0:he.color,backgroundColor:"#ffffff",borderRadius:"12px",padding:"20px 30px",fontSize:"18px",fontWeight:"600",minWidth:"200px",minHeight:"80px",transition:"all 0.3s ease"}),onClick:dt=>me(G)},{default:o(()=>[s("div",Wl,[s("div",Hl,[e(u,{style:{"margin-right":"6px","font-size":"20px"}},{default:o(()=>[e(a(Se))]),_:1}),P(" "+S(G)+" 级 ",1)]),s("div",Yl," 总共 "+S(qe(G))+" 套 ",1)])]),_:2},1032,["style","onClick"])}),128)),e(i,{type:"default",size:"medium",class:Pe("level-button"),style:R({"--button-color":(n=a(V))==null?void 0:n.color,border:`2px solid ${(b=a(V))==null?void 0:b.color}`,color:"#ffffff",backgroundColor:(z=a(V))==null?void 0:z.color,borderRadius:"12px",padding:"20px 30px",fontSize:"18px",fontWeight:"600",minWidth:"200px",minHeight:"80px",transition:"all 0.3s ease"}),onClick:l[13]||(l[13]=G=>me("全部"))},{default:o(()=>[s("div",Kl,[s("div",Xl,[e(u,{style:{"margin-right":"6px","font-size":"20px"}},{default:o(()=>[e(a(Se))]),_:1}),l[35]||(l[35]=P(" 全部 ",-1))]),s("div",Zl," 总共 "+S(Fe())+" 套 ",1)])]),_:1},8,["style"])])]}),_:1},8,["modelValue","title"]),e(ee,{modelValue:a(K),"onUpdate:modelValue":l[18]||(l[18]=n=>D(K)?K.value=n:null),title:`${(_e=a(q))==null?void 0:_e.name} - 题目管理`,width:"1200px"},{header:o(()=>{var n;return[s("div",et,[s("span",null,S((n=a(q))==null?void 0:n.name)+" - 题目管理",1)])]}),default:o(()=>[s("div",lt,[e(g,{inline:!0,model:a(J)},{default:o(()=>[e(v,{label:"题目内容"},{default:o(()=>[e(B,{modelValue:a(J).title,"onUpdate:modelValue":l[15]||(l[15]=n=>a(J).title=n),placeholder:"请输入题目内容",style:{width:"200px"}},null,8,["modelValue"])]),_:1}),e(v,null,{default:o(()=>[e(i,{type:"primary",size:"medium",onClick:Ke},{default:o(()=>[e(u,null,{default:o(()=>[e(a(pl))]),_:1}),l[36]||(l[36]=s("span",null,"搜索",-1))]),_:1})]),_:1})]),_:1},8,["model"]),s("div",tt,[e(i,{type:"primary",size:"medium",onClick:Oe},{default:o(()=>[e(u,null,{default:o(()=>[e(a(Ce))]),_:1}),l[37]||(l[37]=s("span",null,"添加题目",-1))]),_:1}),e(i,{type:"success",size:"medium",onClick:We},{default:o(()=>[e(u,null,{default:o(()=>[e(a(xe))]),_:1}),l[38]||(l[38]=s("span",null,"导入题目",-1))]),_:1}),e(i,{type:"danger",size:"medium",disabled:a(j).length===0,onClick:Me},{default:o(()=>[e(u,null,{default:o(()=>[e(a(ie))]),_:1}),l[39]||(l[39]=s("span",null,"批量删除",-1))]),_:1},8,["disabled"]),s("input",{ref_key:"fileInputRef",ref:L,type:"file",accept:".json",style:{display:"none"},onChange:He},null,544)])]),ml((C(),N(Q,{data:a(ce),style:{width:"100%"},onSelectionChange:Le},{default:o(()=>[e(m,{type:"selection",width:"45",align:"center"}),e(m,{type:"index",label:"序号",width:"100",align:"center"}),e(m,{prop:"title",label:"题目内容","min-width":"400","show-overflow-tooltip":""}),e(m,{prop:"type",label:"题目类型",width:"150",align:"center"},{default:o(n=>[s("span",null,S(n.row.type==="choice"?"单选题":"判断题"),1)]),_:1}),e(m,{prop:"correct_answer",label:"正确答案",width:"150",align:"center"},{default:o(n=>[s("span",at,S(n.row.correct_answer||"-"),1)]),_:1}),e(m,{label:"操作",width:"220",fixed:"right",align:"center"},{default:o(n=>[s("div",ot,[e(i,{size:"medium",onClick:b=>Re(n.row)},{default:o(()=>[e(u,null,{default:o(()=>[e(a(we))]),_:1}),l[40]||(l[40]=s("span",null,"编辑",-1))]),_:1},8,["onClick"]),e(i,{size:"medium",type:"danger",onClick:b=>Je(n.row.id)},{default:o(()=>[e(u,null,{default:o(()=>[e(a(ie))]),_:1}),l[41]||(l[41]=s("span",null,"删除",-1))]),_:1},8,["onClick"])])]),_:1})]),_:1},8,["data"])),[[tl,t.loading]]),e(re,{"current-page":a(I),"onUpdate:currentPage":l[16]||(l[16]=n=>D(I)?I.value=n:null),"page-size":a(X),"onUpdate:pageSize":l[17]||(l[17]=n=>D(X)?X.value=n:null),"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:a(ce).length,onSizeChange:Xe,onCurrentChange:Ze,style:{"margin-top":"20px","text-align":"right"}},null,8,["current-page","page-size","total"])]),_:1},8,["modelValue","title"]),e(ee,{modelValue:a(A),"onUpdate:modelValue":l[24]||(l[24]=n=>D(A)?A.value=n:null),title:a(oe),width:"800px"},{footer:o(()=>[s("span",it,[e(i,{size:"medium",onClick:l[23]||(l[23]=n=>A.value=!1)},{default:o(()=>[...l[43]||(l[43]=[P("取消",-1)])]),_:1}),e(i,{type:"primary",size:"medium",onClick:Ye},{default:o(()=>[...l[44]||(l[44]=[P("保存",-1)])]),_:1})])]),default:o(()=>[e(g,{model:a(d),"label-width":"100px"},{default:o(()=>[e(v,{label:"题目内容"},{default:o(()=>[e(B,{modelValue:a(d).title,"onUpdate:modelValue":l[19]||(l[19]=n=>a(d).title=n),type:"textarea",rows:4,placeholder:"请输入题目内容"},null,8,["modelValue"])]),_:1}),e(v,{label:"题目类型",style:{width:"200px"}},{default:o(()=>[e(h,{modelValue:a(d).type,"onUpdate:modelValue":l[20]||(l[20]=n=>a(d).type=n),placeholder:"请选择题目类型",style:{width:"200px"}},{default:o(()=>[e(r,{label:"单选题",value:"choice"}),e(r,{label:"判断题",value:"judgment"})]),_:1},8,["modelValue"])]),_:1}),a(d).type==="choice"?(C(),N(v,{key:0,label:"选项"},{default:o(()=>[s("div",nt,[(C(!0),F(O,null,le(a(d).options,(n,b)=>(C(),F("div",{key:b,class:"option-item",style:{display:"flex","align-items":"center",gap:"8px","margin-bottom":"8px",width:"100%"}},[s("span",rt,S(String.fromCharCode(65+b))+". ",1),e(B,{modelValue:a(d).options[b],"onUpdate:modelValue":z=>a(d).options[b]=z,placeholder:"请输入选项"+String.fromCharCode(65+b)+"内容",style:{flex:"1",width:"100%"}},null,8,["modelValue","onUpdate:modelValue","placeholder"])]))),128)),s("div",st,[e(ll,{size:"small",type:"info"},{default:o(()=>[...l[42]||(l[42]=[P("单选题固定为4个选项",-1)])]),_:1})])])]),_:1})):Ve("",!0),e(v,{label:"正确答案"},{default:o(()=>[e(h,{modelValue:a(d).correct_answer,"onUpdate:modelValue":l[21]||(l[21]=n=>a(d).correct_answer=n),placeholder:"请选择正确答案",style:{width:"200px"}},{default:o(()=>[a(d).type==="choice"?(C(),F(O,{key:0},[e(r,{label:"A",value:"A"}),e(r,{label:"B",value:"B"}),e(r,{label:"C",value:"C"}),e(r,{label:"D",value:"D"})],64)):a(d).type==="judgment"?(C(),F(O,{key:1},[e(r,{label:"正确",value:"正确"}),e(r,{label:"错误",value:"错误"})],64)):Ve("",!0)]),_:1},8,["modelValue"])]),_:1}),e(v,{label:"解析"},{default:o(()=>[e(B,{modelValue:a(d).explanation,"onUpdate:modelValue":l[22]||(l[22]=n=>a(d).explanation=n),type:"textarea",rows:4,placeholder:"请输入题目解析"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},xt=al(ut,[["__scopeId","data-v-3e488e80"]]);export{xt as default};
