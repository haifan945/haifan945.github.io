import{_ as A,c as J,o as L,a as Q,b as H,e,w as o,u as r,i as V,r as c,E as W,f as X,d,D as Y,M as Z,t as ee,I as le,J as te,l as G,n as ae,P as oe,V as ne,S as re,Q as ue,R as se,T as de,q as ie,a4 as ce,s as pe,U as me}from"./index-bc0a5eae.js";/* empty css                  *//* empty css                   */import{s as C}from"./request-cb2fba24.js";/* empty css                      *//* empty css                  *//* empty css                 *//* empty css                     */import{s as i,c as ve}from"./message-4842d644.js";async function fe(){return C({url:"/knowledge-base",method:"GET"})}async function ge(p){return C({url:"/knowledge-base",method:"POST",data:p})}async function _e(p){return C({url:`/knowledge-base/${p.id}`,method:"PUT",data:p})}async function ye(p){return C({url:`/knowledge-base/${p}`,method:"DELETE"})}const S={getKnowledgeBase:fe,createKnowledgeBase:ge,updateKnowledgeBase:_e,deleteKnowledgeBase:ye};const be={class:"knowledge-base-container"},he={class:"card-header"},we={class:"action-buttons"},Se={class:"dialog-footer"},Ce={__name:"KnowledgeBase",setup(p){const m=c(!1),P=c("新建知识库"),h=c(1),w=c(10),g=c(!1),s=c({title:"",category:""}),u=c({id:"",title:"",category:"",content:""}),v=c([]),B=J(()=>{let a=v.value;return s.value.title&&(a=a.filter(l=>l.title.includes(s.value.title))),s.value.category&&(a=a.filter(l=>l.category===s.value.category)),a}),K=async()=>{try{g.value=!0;const a=await S.getKnowledgeBase();v.value=a||[]}catch(a){i("获取知识库数据失败","error"),console.error("获取知识库数据失败:",a)}finally{g.value=!1}};L(()=>{K()});const T=()=>{console.log("搜索:",s.value)},z=a=>{w.value=a},U=a=>{h.value=a},I=()=>{P.value="新建知识库",u.value={id:"",title:"",category:"",content:""},m.value=!0},D=a=>{P.value="编辑知识库",u.value={id:a.id,title:a.title,category:a.category,content:a.content},m.value=!0},$=a=>{ve("确定要删除该知识库吗？").then(async()=>{try{g.value=!0,await S.deleteKnowledgeBase(a),v.value=v.value.filter(l=>l.id!==a),i("删除成功")}catch(l){i("删除失败","error"),console.error("删除知识库失败:",l)}finally{g.value=!1}}).catch(()=>{})},F=async()=>{if(!u.value.title){i("请输入标题","error");return}if(!u.value.category){i("请选择分类","error");return}if(!u.value.content){i("请输入内容","error");return}try{if(g.value=!0,u.value.id){const a=await S.updateKnowledgeBase(u.value),l=v.value.findIndex(_=>_.id===u.value.id);l!==-1&&(v.value[l]=a),i("编辑成功")}else{const a=await S.createKnowledgeBase(u.value);v.value.unshift(a),i("创建成功")}m.value=!1}catch(a){i("操作失败","error"),console.error("知识库操作失败:",a)}finally{g.value=!1}};return(a,l)=>{const _=ae,y=oe,E=ne,b=re,t=ue,k=se,x=de,f=ie,M=ce,N=pe,O=me,R=W,j=X;return Q(),H("div",be,[e(R,{shadow:"hover"},{header:o(()=>[d("div",he,[l[10]||(l[10]=d("span",null,"知识库管理",-1)),e(y,{type:"primary",onClick:I},{default:o(()=>[e(_,null,{default:o(()=>[e(r(Y))]),_:1}),l[9]||(l[9]=d("span",null,"新建知识库",-1))]),_:1})])]),default:o(()=>[e(x,{inline:!0,model:r(s),style:{"margin-bottom":"20px"}},{default:o(()=>[e(b,{label:"标题"},{default:o(()=>[e(E,{modelValue:r(s).title,"onUpdate:modelValue":l[0]||(l[0]=n=>r(s).title=n),placeholder:"请输入标题",style:{width:"200px"}},null,8,["modelValue"])]),_:1}),e(b,{label:"分类"},{default:o(()=>[e(k,{modelValue:r(s).category,"onUpdate:modelValue":l[1]||(l[1]=n=>r(s).category=n),placeholder:"请选择分类"},{default:o(()=>[e(t,{label:"全部",value:""}),e(t,{label:"青少年软件编程（Scratch）",value:"青少年软件编程（Scratch）"}),e(t,{label:"青少年软件编程（Python）",value:"青少年软件编程（Python）"}),e(t,{label:"青少年软件编程（机器人）",value:"青少年软件编程（机器人）"}),e(t,{label:"青少年软件编程（C语言）",value:"青少年软件编程（C语言）"}),e(t,{label:"蓝桥杯大赛（Scratch）",value:"蓝桥杯大赛（Scratch）"}),e(t,{label:"蓝桥杯大赛（Python）",value:"蓝桥杯大赛（Python）"}),e(t,{label:"蓝桥杯大赛（C语言）",value:"蓝桥杯大赛（C语言）"}),e(t,{label:"GESP等级认证（Scratch）",value:"GESP等级认证（Scratch）"}),e(t,{label:"GESP等级认证（Python）",value:"GESP等级认证（Python）"}),e(t,{label:"GESP等级认证（C++）",value:"GESP等级认证（C++）"}),e(t,{label:"信息学奥赛",value:"信息学奥赛"}),e(t,{label:"信息素养大赛（Scratch）",value:"信息素养大赛（Scratch）"}),e(t,{label:"信息素养大赛（Python）",value:"信息素养大赛（Python）"}),e(t,{label:"信息素养大赛（C语言）",value:"信息素养大赛（C语言）"})]),_:1},8,["modelValue"])]),_:1}),e(b,null,{default:o(()=>[e(y,{type:"primary",onClick:T},{default:o(()=>[e(_,null,{default:o(()=>[e(r(Z))]),_:1}),l[11]||(l[11]=d("span",null,"搜索",-1))]),_:1})]),_:1})]),_:1},8,["model"]),e(N,{data:r(B),style:{width:"100%"}},{default:o(()=>[e(f,{prop:"id",label:"ID",width:"80"}),e(f,{prop:"title",label:"标题","min-width":"200"}),e(f,{prop:"category",label:"分类",width:"200"}),e(f,{prop:"content",label:"内容","min-width":"300"},{default:o(n=>[e(M,{content:n.row.content,placement:"top"},{default:o(()=>[d("span",null,ee(n.row.content.length>50?n.row.content.substring(0,50)+"...":n.row.content),1)]),_:2},1032,["content"])]),_:1}),e(f,{prop:"createTime",label:"创建时间",width:"180"}),e(f,{prop:"updateTime",label:"更新时间",width:"180"}),e(f,{label:"操作",width:"150",fixed:"right"},{default:o(n=>[d("div",we,[e(y,{size:"small",onClick:q=>D(n.row)},{default:o(()=>[e(_,null,{default:o(()=>[e(r(le))]),_:1}),l[12]||(l[12]=d("span",null,"编辑",-1))]),_:1},8,["onClick"]),e(y,{size:"small",type:"danger",onClick:q=>$(n.row.id)},{default:o(()=>[e(_,null,{default:o(()=>[e(r(te))]),_:1}),l[13]||(l[13]=d("span",null,"删除",-1))]),_:1},8,["onClick"])])]),_:1})]),_:1},8,["data"]),e(O,{"current-page":r(h),"onUpdate:currentPage":l[2]||(l[2]=n=>V(h)?h.value=n:null),"page-size":r(w),"onUpdate:pageSize":l[3]||(l[3]=n=>V(w)?w.value=n:null),"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:r(B).length,onSizeChange:z,onCurrentChange:U,style:{"margin-top":"20px","text-align":"right"}},null,8,["current-page","page-size","total"])]),_:1}),e(j,{modelValue:r(m),"onUpdate:modelValue":l[8]||(l[8]=n=>V(m)?m.value=n:null),title:r(P),width:"800px"},{footer:o(()=>[d("span",Se,[e(y,{onClick:l[7]||(l[7]=n=>m.value=!1)},{default:o(()=>[...l[14]||(l[14]=[G("取消",-1)])]),_:1}),e(y,{type:"primary",onClick:F},{default:o(()=>[...l[15]||(l[15]=[G("确定",-1)])]),_:1})])]),default:o(()=>[e(x,{model:r(u),"label-width":"100px"},{default:o(()=>[e(b,{label:"标题"},{default:o(()=>[e(E,{modelValue:r(u).title,"onUpdate:modelValue":l[4]||(l[4]=n=>r(u).title=n),placeholder:"请输入标题"},null,8,["modelValue"])]),_:1}),e(b,{label:"分类"},{default:o(()=>[e(k,{modelValue:r(u).category,"onUpdate:modelValue":l[5]||(l[5]=n=>r(u).category=n),placeholder:"请选择分类"},{default:o(()=>[e(t,{label:"青少年软件编程（Scratch）",value:"青少年软件编程（Scratch）"}),e(t,{label:"青少年软件编程（Python）",value:"青少年软件编程（Python）"}),e(t,{label:"青少年软件编程（机器人）",value:"青少年软件编程（机器人）"}),e(t,{label:"青少年软件编程（C语言）",value:"青少年软件编程（C语言）"}),e(t,{label:"蓝桥杯大赛（Scratch）",value:"蓝桥杯大赛（Scratch）"}),e(t,{label:"蓝桥杯大赛（Python）",value:"蓝桥杯大赛（Python）"}),e(t,{label:"蓝桥杯大赛（C语言）",value:"蓝桥杯大赛（C语言）"}),e(t,{label:"GESP等级认证（Scratch）",value:"GESP等级认证（Scratch）"}),e(t,{label:"GESP等级认证（Python）",value:"GESP等级认证（Python）"}),e(t,{label:"GESP等级认证（C++）",value:"GESP等级认证（C++）"}),e(t,{label:"信息学奥赛",value:"信息学奥赛"}),e(t,{label:"信息素养大赛（Scratch）",value:"信息素养大赛（Scratch）"}),e(t,{label:"信息素养大赛（Python）",value:"信息素养大赛（Python）"}),e(t,{label:"信息素养大赛（C语言）",value:"信息素养大赛（C语言）"})]),_:1},8,["modelValue"])]),_:1}),e(b,{label:"内容"},{default:o(()=>[e(E,{modelValue:r(u).content,"onUpdate:modelValue":l[6]||(l[6]=n=>r(u).content=n),type:"textarea",rows:8,placeholder:"请输入内容"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},ze=A(Ce,[["__scopeId","data-v-2a35c46a"]]);export{ze as default};
